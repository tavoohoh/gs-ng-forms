import * as tslib_1 from "tslib";
import { Component, Input, ViewChild } from '@angular/core';
import { GsGenericFieldComponent } from '../_generic-field/_generic-field.component';
var GsSeparatedByCommaComponent = /** @class */ (function (_super) {
    tslib_1.__extends(GsSeparatedByCommaComponent, _super);
    function GsSeparatedByCommaComponent() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.fieldOption = [];
        _this.value = '';
        return _this;
    }
    GsSeparatedByCommaComponent.prototype.ngOnChanges = function (changes) {
        if (changes.field && changes.field.currentValue && changes.field.currentValue.config.value) {
            this.fieldOption = changes.field.currentValue.config.value.split(',');
        }
    };
    GsSeparatedByCommaComponent.prototype.focusInput = function () {
        this.inputElement.nativeElement.focus();
    };
    GsSeparatedByCommaComponent.prototype.removeValue = function (valIndex) {
        this.fieldOption.splice(valIndex, 1);
    };
    GsSeparatedByCommaComponent.prototype.disableEnter = function (event) {
        event.preventDefault();
    };
    GsSeparatedByCommaComponent.prototype.removeLastValue = function (event) {
        if (this.value === '' && event.keyCode === 8) {
            this.fieldOption.pop();
            return;
        }
    };
    GsSeparatedByCommaComponent.prototype.removeAll = function () {
        this.fieldOption = [];
    };
    GsSeparatedByCommaComponent.prototype.addValue = function (event) {
        if (this.value === '' || this.value === ',') {
            return;
        }
        if (event.keyCode === 188 || event.keyCode === 13) {
            var value = this.value.replace(/,/g, '');
            if (value === '') {
                return;
            }
            this.fieldOption.push(value);
            var valuesAsString = this.fieldOption.join(',');
            this.formGroup.controls[this.field.config.model].patchValue(valuesAsString);
            this.formGroup.controls[this.field.config.model].updateValueAndValidity();
            this.value = '';
            return;
        }
    };
    tslib_1.__decorate([
        Input()
    ], GsSeparatedByCommaComponent.prototype, "field", void 0);
    tslib_1.__decorate([
        ViewChild('inputElement', { static: true })
    ], GsSeparatedByCommaComponent.prototype, "inputElement", void 0);
    GsSeparatedByCommaComponent = tslib_1.__decorate([
        Component({
            selector: 'gs-separated-by-comma',
            template: "<div class=\"gs-field\" \n  [class.gs-field-has-error]=\"validateField()\">\n  \n  <label\n    class=\"gs-field-box gs-field-separated-box\"\n    [class.gs-form-field-box-full]=\"field.config.label\">\n\n    <span\n      class=\"gs-field-label\"\n      *ngIf=\"field.config.label\">\n      {{ field.config.label | translate }}\n    </span>\n\n    <div class=\"gs-field-input gs-field-separated-input\">\n      <!-- input -->\n      <div class=\"gs-field-separated-input-item\">\n        <input\n          #inputElement\n          class=\"gs-field-input\"\n          type=\"text\"\n          [autocomplete]=\"'off'\"\n          [id]=\"field.config.model\"\n          [placeholder]=\"field.config.placeholder || field.config.label || field.config.model | translate\"\n          [(ngModel)]=\"value\"\n          (keydown.enter)=\"disableEnter($event)\"\n          (keydown)=\"removeLastValue($event)\"\n          (keyup)=\"addValue($event)\"/>\n        <button *ngIf=\"fieldOption.length > 0\" type=\"button\" (click)=\"removeAll()\">&times;</button>\n      </div>\n    </div>\n  </label>\n\n  <span class=\"gs-field-error\" *ngIf=\"validateField()\">\n    {{ getFieldError(field.config.model) | translate }}\n  </span>\n\n  <span class=\"gs-field-separated-values\" *ngIf=\"fieldOption\">\n    <span class=\"gs-field-separated-value\" *ngFor=\"let item of fieldOption; let i = index;\">\n      <span class=\"gs-field-separated-value-name\">{{ item }}</span>\n      <button class=\"gs-field-separated-value-remove\" type=\"button\" (click)=\"removeValue(i)\">\n        &times;\n      </button>\n    </span>\n  </span>\n</div>",
            styles: ["*{color:var(--gs-color-font,#706967);outline:0;box-sizing:border-box}input,option,select,textarea{border:none;outline:0;display:block;box-shadow:none;box-sizing:border-box}input::-webkit-input-placeholder,option::-webkit-input-placeholder,select::-webkit-input-placeholder,textarea::-webkit-input-placeholder{opacity:.5}input::-moz-placeholder,option::-moz-placeholder,select::-moz-placeholder,textarea::-moz-placeholder{opacity:.5}input::-ms-input-placeholder,option::-ms-input-placeholder,select::-ms-input-placeholder,textarea::-ms-input-placeholder{opacity:.5}input::placeholder,option::placeholder,select::placeholder,textarea::placeholder{opacity:.5}.disabled{opacity:var(--gs-disabled-opacity,.7);cursor:default;pointer-events:none}.button{-webkit-transition:.2s ease-in-out;transition:.2s ease-in-out;cursor:pointer;border:none;text-align:center;font-weight:700;outline:0;padding:var(--gs-primary-button-padding,1rem);color:var(--gs-primary-button-color,#fff);background:var(--gs-primary-button-background,#b8b4b4);border-radius:var(--gs-primary-button-border-radius,1rem)}.button:hover{opacity:.8}.button.button-primary{padding:var(--gs-primary-button-padding,1rem);color:var(--gs-primary-button-color,#fff);background:var(--gs-primary-button-background,#ff2426);border:none;border-radius:var(--gs-primary-button-border-radius,1rem)}.button.button-secondary{padding:var(--gs-primary-button-padding,1rem);color:var(--gs-primary-button-background,#ff2426);background:0 0;border:2px solid var(--gs-primary-button-background,#ff2426);border-radius:var(--gs-primary-button-border-radius,1rem)}*,input,select,textarea{font-size:var(--gs-font-size,.9rem);font-family:inherit;background-color:transparent}.gs-no-select{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.gs-field{position:relative}.gs-field.gs-field-has-error .gs-field-box{border:2px solid #ff2426}.gs-field.gs-field-has-error .gs-field-error{display:block}.gs-field-box{border:2px solid var(--gs-input-border-color,none);display:-ms-grid;display:grid;background-color:var(--gs-input-background,#fff);padding:var(--gs-input-padding,12px);border-radius:var(--gs-input-border-radius,1rem);height:51px}.gs-field-box .gs-field-label{color:#706967;font-size:.6rem;font-weight:600;letter-spacing:.1em;line-height:1;text-transform:uppercase;-ms-grid-column:1;grid-column:1;-ms-grid-row:1;grid-row:1;color:var(--gs-input-color,#332927);opacity:.5}.gs-field-box .gs-field-input{outline:0;border:none;width:100%;margin:0;font-weight:600;font-size:1rem;line-height:1;padding:0;-ms-grid-column:1;grid-column:1;-ms-grid-row:2;grid-row:2}.gs-field-box .gs-field-input :focus,.gs-field-box .gs-field-input:focus{outline:0}.gs-field-box .gs-field-input::-webkit-input-placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-field-input::-moz-placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-field-input::-ms-input-placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-field-input::placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-form-field_symbol{-ms-grid-column:2;grid-column:2;-ms-grid-row:1;-ms-grid-row-span:2;grid-row:1/3;-ms-grid-row-align:center;align-self:center;text-align:right}.gs-field-box.gs-field-box-full .gs-field-input{padding:.1rem 0 0}.gs-field-box.gs-input-check-box,.gs-field-box.gs-input-switch-box{-ms-grid-columns:1fr auto;grid-template-columns:1fr auto}.gs-field-box.gs-input-check-box .gs-field-label,.gs-field-box.gs-input-switch-box .gs-field-label{-ms-grid-column:1;grid-column:1;-ms-grid-row:1;grid-row:1;-ms-grid-row-align:center;align-self:center}.gs-field-box.gs-input-check-box .gs-input-check,.gs-field-box.gs-input-check-box .gs-input-switch,.gs-field-box.gs-input-switch-box .gs-input-check,.gs-field-box.gs-input-switch-box .gs-input-switch{-ms-grid-column:2;grid-column:2;-ms-grid-row:1;grid-row:1;-ms-grid-row-align:center;align-self:center}.gs-field-box.gs-field-box-icon{display:-ms-grid;display:grid;-ms-grid-columns:1fr 20px;grid-template-columns:1fr 20px}.gs-field-box.gs-field-box-icon .gs-field-icon{cursor:pointer;width:20px;fill:#706967;-ms-grid-column:2;grid-column:2;-ms-grid-row:1;-ms-grid-row-span:2;grid-row:1/3;-ms-grid-row-align:center;align-self:center}.gs-field-error,.gs-field-hint{font-size:.8rem;padding:.6rem 1rem;display:inline-block;margin-right:1rem}.gs-field-error{display:none;color:#ff2426}.gs-field-separated-values{margin:3px 0 0;display:-webkit-box;display:flex;flex-wrap:wrap;-webkit-box-align:center;align-items:center}.gs-field-separated-values .gs-field-separated-value{padding:2px 6px;margin:0 3px 3px 0;color:#fff;background-color:#332927;border-radius:1rem;display:-ms-grid;display:grid;-ms-grid-columns:1fr 10px;grid-template-columns:1fr 10px;gap:3px}.gs-field-separated-values .gs-field-separated-value:last-child{margin-right:0}.gs-field-separated-values .gs-field-separated-value .gs-field-separated-value-remove{cursor:pointer;background:0 0;border:none;outline:0;padding:0;color:#fff;-ms-grid-row-align:center;align-self:center}.gs-field-separated-values .gs-field-separated-value .gs-field-separated-value-name{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#fff}.gs-field-separated-input{display:-webkit-box;display:flex;flex-wrap:wrap;width:100%;padding:0}.gs-field-separated-input .gs-field-separated-input-item{position:relative;display:-ms-grid;display:grid;-ms-grid-columns:1fr 24px;grid-template-columns:1fr 24px;width:100%}.gs-field-separated-input .gs-field-separated-input-item button{-ms-grid-column:2;grid-column:2;-ms-grid-row:1;grid-row:1;cursor:pointer;background:0 0;border:none;outline:0;padding:0;fill:var(--gs-color-neutral,#706967)}.gs-field-separated-input .gs-field-separated-input-item .gs-field-input{-ms-grid-column:1;grid-column:1;-ms-grid-row:1;grid-row:1;background:0 0;border:none;outline:0}"]
        })
    ], GsSeparatedByCommaComponent);
    return GsSeparatedByCommaComponent;
}(GsGenericFieldComponent));
export { GsSeparatedByCommaComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VwYXJhdGVkLWJ5LWNvbW1hLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bncy9uZy1mb3Jtcy8iLCJzb3VyY2VzIjpbImxpYi9ncy1maWVsZHMvc2VwYXJhdGVkLWJ5LWNvbW1hL3NlcGFyYXRlZC1ieS1jb21tYS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBd0MsTUFBTSxlQUFlLENBQUM7QUFFbEcsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFPckY7SUFBaUQsdURBQXVCO0lBTHhFO1FBQUEscUVBNERDO1FBcERRLGlCQUFXLEdBQWtCLEVBQUUsQ0FBQztRQUNoQyxXQUFLLEdBQUcsRUFBRSxDQUFDOztJQW1EcEIsQ0FBQztJQWpEQyxpREFBVyxHQUFYLFVBQVksT0FBc0I7UUFDaEMsSUFBSSxPQUFPLENBQUMsS0FBSyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUU7WUFDMUYsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUN2RTtJQUNILENBQUM7SUFFTSxnREFBVSxHQUFqQjtRQUNFLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQzFDLENBQUM7SUFFTSxpREFBVyxHQUFsQixVQUFtQixRQUFnQjtRQUNqQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVNLGtEQUFZLEdBQW5CLFVBQW9CLEtBQVk7UUFDOUIsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFFTSxxREFBZSxHQUF0QixVQUF1QixLQUFVO1FBQy9CLElBQUksSUFBSSxDQUFDLEtBQUssS0FBSyxFQUFFLElBQUksS0FBSyxDQUFDLE9BQU8sS0FBSyxDQUFDLEVBQUU7WUFDNUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUN2QixPQUFPO1NBQ1I7SUFDSCxDQUFDO0lBRU0sK0NBQVMsR0FBaEI7UUFDRSxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBRU0sOENBQVEsR0FBZixVQUFnQixLQUFVO1FBQ3hCLElBQUksSUFBSSxDQUFDLEtBQUssS0FBSyxFQUFFLElBQUksSUFBSSxDQUFDLEtBQUssS0FBSyxHQUFHLEVBQUU7WUFDM0MsT0FBTztTQUNSO1FBRUQsSUFBSSxLQUFLLENBQUMsT0FBTyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsT0FBTyxLQUFLLEVBQUUsRUFBRTtZQUNqRCxJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFFM0MsSUFBSSxLQUFLLEtBQUssRUFBRSxFQUFFO2dCQUNoQixPQUFPO2FBQ1I7WUFFRCxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM3QixJQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNsRCxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDNUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztZQUMxRSxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztZQUNoQixPQUFPO1NBQ1I7SUFDSCxDQUFDO0lBckRRO1FBQVIsS0FBSyxFQUFFOzhEQUFpQztJQUNJO1FBQTVDLFNBQVMsQ0FBQyxjQUFjLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUM7cUVBQTBCO0lBRjNELDJCQUEyQjtRQUx2QyxTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsdUJBQXVCO1lBQ2pDLGttREFBa0Q7O1NBRW5ELENBQUM7T0FDVywyQkFBMkIsQ0F1RHZDO0lBQUQsa0NBQUM7Q0FBQSxBQXZERCxDQUFpRCx1QkFBdUIsR0F1RHZFO1NBdkRZLDJCQUEyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBHU2VwYXJhdGVkQnlDb21tYSB9IGZyb20gJy4uLy4uL2dzLWZvcm1zLndpZGdldHMnO1xuaW1wb3J0IHsgR3NHZW5lcmljRmllbGRDb21wb25lbnQgfSBmcm9tICcuLi9fZ2VuZXJpYy1maWVsZC9fZ2VuZXJpYy1maWVsZC5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdncy1zZXBhcmF0ZWQtYnktY29tbWEnLFxuICB0ZW1wbGF0ZVVybDogJy4vc2VwYXJhdGVkLWJ5LWNvbW1hLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vc2VwYXJhdGVkLWJ5LWNvbW1hLmNvbXBvbmVudC5zYXNzJ11cbn0pXG5leHBvcnQgY2xhc3MgR3NTZXBhcmF0ZWRCeUNvbW1hQ29tcG9uZW50IGV4dGVuZHMgR3NHZW5lcmljRmllbGRDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMge1xuICBASW5wdXQoKSBwdWJsaWMgZmllbGQ6IEdTZXBhcmF0ZWRCeUNvbW1hO1xuICBAVmlld0NoaWxkKCdpbnB1dEVsZW1lbnQnLCB7IHN0YXRpYzogdHJ1ZSB9KSBpbnB1dEVsZW1lbnQ6IEVsZW1lbnRSZWY7XG4gIHB1YmxpYyBmaWVsZE9wdGlvbjogQXJyYXk8c3RyaW5nPiA9IFtdO1xuICBwdWJsaWMgdmFsdWUgPSAnJztcblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXMuZmllbGQgJiYgY2hhbmdlcy5maWVsZC5jdXJyZW50VmFsdWUgJiYgY2hhbmdlcy5maWVsZC5jdXJyZW50VmFsdWUuY29uZmlnLnZhbHVlKSB7XG4gICAgICB0aGlzLmZpZWxkT3B0aW9uID0gY2hhbmdlcy5maWVsZC5jdXJyZW50VmFsdWUuY29uZmlnLnZhbHVlLnNwbGl0KCcsJyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGZvY3VzSW5wdXQoKSB7XG4gICAgdGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZVZhbHVlKHZhbEluZGV4OiBudW1iZXIpIHtcbiAgICB0aGlzLmZpZWxkT3B0aW9uLnNwbGljZSh2YWxJbmRleCwgMSk7XG4gIH1cblxuICBwdWJsaWMgZGlzYWJsZUVudGVyKGV2ZW50OiBFdmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlTGFzdFZhbHVlKGV2ZW50OiBhbnkpIHtcbiAgICBpZiAodGhpcy52YWx1ZSA9PT0gJycgJiYgZXZlbnQua2V5Q29kZSA9PT0gOCkge1xuICAgICAgdGhpcy5maWVsZE9wdGlvbi5wb3AoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlQWxsKCkge1xuICAgIHRoaXMuZmllbGRPcHRpb24gPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRWYWx1ZShldmVudDogYW55KSB7XG4gICAgaWYgKHRoaXMudmFsdWUgPT09ICcnIHx8IHRoaXMudmFsdWUgPT09ICcsJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxODggfHwgZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52YWx1ZS5yZXBsYWNlKC8sL2csICcnKTtcblxuICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZmllbGRPcHRpb24ucHVzaCh2YWx1ZSk7XG4gICAgICBjb25zdCB2YWx1ZXNBc1N0cmluZyA9IHRoaXMuZmllbGRPcHRpb24uam9pbignLCcpO1xuICAgICAgdGhpcy5mb3JtR3JvdXAuY29udHJvbHNbdGhpcy5maWVsZC5jb25maWcubW9kZWxdLnBhdGNoVmFsdWUodmFsdWVzQXNTdHJpbmcpO1xuICAgICAgdGhpcy5mb3JtR3JvdXAuY29udHJvbHNbdGhpcy5maWVsZC5jb25maWcubW9kZWxdLnVwZGF0ZVZhbHVlQW5kVmFsaWRpdHkoKTtcbiAgICAgIHRoaXMudmFsdWUgPSAnJztcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbn1cbiJdfQ==