import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
import { GsGenericFieldComponent } from '../_generic-field/_generic-field.component';
var GsMultiselectComponent = /** @class */ (function (_super) {
    tslib_1.__extends(GsMultiselectComponent, _super);
    function GsMultiselectComponent() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.options = [];
        _this.noSelection = true;
        _this.touched = false;
        _this.showMultiselectOptions = false;
        return _this;
    }
    GsMultiselectComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if (changes.fieldOption && changes.fieldOption.currentValue) {
            this.fieldOption = changes.fieldOption.currentValue;
        }
        else {
            this.fieldOption = this.field.config.optionValues;
        }
        this.options = this.fieldOption;
        if (changes.field && changes.field.currentValue.config.value) {
            var currentValues = changes.field.currentValue.config.value;
            currentValues.forEach(function (option) {
                _this.toggleOption(option, false);
            });
        }
    };
    GsMultiselectComponent.prototype.toggleOption = function (option, touched) {
        if (touched === void 0) { touched = true; }
        var selectedOptions = [];
        this.noSelection = true;
        this.touched = touched;
        // tslint:disable-next-line: prefer-for-of
        for (var i = 0; i < this.options.length; i++) {
            if (this.options[i].value === option.value) {
                this.options[i].exists = !option.exists;
            }
            if (this.options[i].exists === true) {
                this.noSelection = false;
                selectedOptions.push({
                    text: this.options[i].text,
                    value: this.options[i].value
                });
                this.formGroup.controls[this.field.config.model].patchValue(selectedOptions);
                this.formGroup.controls[this.field.config.model].updateValueAndValidity();
            }
        }
    };
    GsMultiselectComponent.prototype.toggleMultiselectOptions = function (value) {
        if (value === void 0) { value = !this.showMultiselectOptions; }
        this.showMultiselectOptions = value;
    };
    GsMultiselectComponent.prototype.requiredText = function () {
        return this.formsService.getValidationMessage('ERR_REQUIRED');
    };
    tslib_1.__decorate([
        Input()
    ], GsMultiselectComponent.prototype, "field", void 0);
    tslib_1.__decorate([
        Input()
    ], GsMultiselectComponent.prototype, "fieldOption", void 0);
    GsMultiselectComponent = tslib_1.__decorate([
        Component({
            selector: 'gs-multiselect',
            template: "<div class=\"multiselect gs-no-select\" [formGroup]=\"formGroup\" gsClickOutside (gsClickOutside)=\"toggleMultiselectOptions(false)\">\n  <!-- selected options -->\n  <div class=\"input gs-form-field_multiselect-selected_options\" (click)=\"toggleMultiselectOptions()\">\n    <ng-container *ngFor=\"let option of options\">\n      <span *ngIf=\"option.exists\" class=\"selected-option\">\n        {{ option.text }}\n        <button type=\"button\" (click)=\"toggleOption(option)\">&times;</button>\n      </span>\n    </ng-container>\n    <span *ngIf=\"noSelection\" class=\"placeholder\">\n      {{ field.config.placeholder || field.config.label || field.config.model | translate }}\n    </span>\n    <span class=\"height-holder\">&nbsp;</span>\n  </div>\n\n  <!-- options -->\n  <div class=\"gs-form-field_multiselect-options\" *ngIf=\"this.showMultiselectOptions\">\n    <span *ngFor=\"let option of options\" (click)=\"toggleOption(option)\">\n      <span [class.selected]=\"option.exists\">\n        {{ option.text }}\n      </span>\n    </span>\n  </div>\n\n  <span class=\"gs-form-field_error_message\" *ngIf=\"touched && noSelection && field.config.validators.required\">\n    {{ requiredText() }}\n  </span>\n</div>",
            styles: ["*{color:var(--gs-color-font,#706967);outline:0;box-sizing:border-box}input,option,select,textarea{border:none;outline:0;display:block;box-shadow:none;box-sizing:border-box}input::-webkit-input-placeholder,option::-webkit-input-placeholder,select::-webkit-input-placeholder,textarea::-webkit-input-placeholder{opacity:.5}input::-moz-placeholder,option::-moz-placeholder,select::-moz-placeholder,textarea::-moz-placeholder{opacity:.5}input::-ms-input-placeholder,option::-ms-input-placeholder,select::-ms-input-placeholder,textarea::-ms-input-placeholder{opacity:.5}input::placeholder,option::placeholder,select::placeholder,textarea::placeholder{opacity:.5}.disabled{opacity:var(--gs-disabled-opacity,.7);cursor:default;pointer-events:none}.button{-webkit-transition:.2s ease-in-out;transition:.2s ease-in-out;cursor:pointer;border:none;text-align:center;font-weight:700;outline:0;padding:var(--gs-primary-button-padding,1rem);color:var(--gs-primary-button-color,#fff);background:var(--gs-primary-button-background,#b8b4b4);border-radius:var(--gs-primary-button-border-radius,1rem)}.button:hover{opacity:.8}.button.button-primary{padding:var(--gs-primary-button-padding,1rem);color:var(--gs-primary-button-color,#fff);background:var(--gs-primary-button-background,#ff2426);border:none;border-radius:var(--gs-primary-button-border-radius,1rem)}.button.button-secondary{padding:var(--gs-primary-button-padding,1rem);color:var(--gs-primary-button-background,#ff2426);background:0 0;border:2px solid var(--gs-primary-button-background,#ff2426);border-radius:var(--gs-primary-button-border-radius,1rem)}*,input,select,textarea{font-size:var(--gs-font-size,.9rem);font-family:inherit;background-color:transparent}.gs-no-select{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.gs-field{position:relative}.gs-field.gs-field-has-error .gs-field-box{border:2px solid #ff2426}.gs-field.gs-field-has-error .gs-field-error{display:block}.gs-field-box{border:2px solid var(--gs-input-border-color,none);display:-ms-grid;display:grid;background-color:var(--gs-input-background,#fff);padding:var(--gs-input-padding,12px);border-radius:var(--gs-input-border-radius,1rem);height:51px}.gs-field-box .gs-field-label{color:#706967;font-size:.6rem;font-weight:600;letter-spacing:.1em;line-height:1;text-transform:uppercase;-ms-grid-column:1;grid-column:1;-ms-grid-row:1;grid-row:1;color:var(--gs-input-color,#332927);opacity:.5}.gs-field-box .gs-field-input{outline:0;border:none;width:100%;margin:0;font-weight:600;font-size:1rem;line-height:1;padding:0;-ms-grid-column:1;grid-column:1;-ms-grid-row:2;grid-row:2}.gs-field-box .gs-field-input :focus,.gs-field-box .gs-field-input:focus{outline:0}.gs-field-box .gs-field-input::-webkit-input-placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-field-input::-moz-placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-field-input::-ms-input-placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-field-input::placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-form-field_symbol{-ms-grid-column:2;grid-column:2;-ms-grid-row:1;-ms-grid-row-span:2;grid-row:1/3;-ms-grid-row-align:center;align-self:center;text-align:right}.gs-field-box.gs-field-box-full .gs-field-input{padding:.1rem 0 0}.gs-field-box.gs-input-check-box,.gs-field-box.gs-input-switch-box{-ms-grid-columns:1fr auto;grid-template-columns:1fr auto}.gs-field-box.gs-input-check-box .gs-field-label,.gs-field-box.gs-input-switch-box .gs-field-label{-ms-grid-column:1;grid-column:1;-ms-grid-row:1;grid-row:1;-ms-grid-row-align:center;align-self:center}.gs-field-box.gs-input-check-box .gs-input-check,.gs-field-box.gs-input-check-box .gs-input-switch,.gs-field-box.gs-input-switch-box .gs-input-check,.gs-field-box.gs-input-switch-box .gs-input-switch{-ms-grid-column:2;grid-column:2;-ms-grid-row:1;grid-row:1;-ms-grid-row-align:center;align-self:center}.gs-field-box.gs-field-box-icon{display:-ms-grid;display:grid;-ms-grid-columns:1fr 20px;grid-template-columns:1fr 20px}.gs-field-box.gs-field-box-icon .gs-field-icon{cursor:pointer;width:20px;fill:#706967;-ms-grid-column:2;grid-column:2;-ms-grid-row:1;-ms-grid-row-span:2;grid-row:1/3;-ms-grid-row-align:center;align-self:center}.gs-field-error,.gs-field-hint{font-size:.8rem;padding:.6rem 1rem;display:inline-block;margin-right:1rem}.gs-field-error{display:none;color:#ff2426}.multiselect{position:relative;width:100%}.multiselect .gs-form-field_multiselect-selected_options{display:-webkit-box;display:flex;flex-wrap:wrap;-webkit-box-align:center;align-items:center;margin:0;padding:0}.multiselect .gs-form-field_multiselect-selected_options .placeholder{opacity:1}.multiselect .gs-form-field_multiselect-selected_options .height-holder{padding:var(--gs-input-padding,12px)}.multiselect .gs-form-field_multiselect-selected_options .selected-option{padding:4px 8px;color:var(--gs-color-white,#fff);background-color:var(--gs-color-primary,#ff2426);margin:4px 0 4px 4px;border-radius:12px}.multiselect .gs-form-field_multiselect-selected_options .selected-option button{cursor:pointer;background:0 0;border:none;outline:0;padding:0;color:var(--gs-color-white,#fff)}.multiselect .gs-form-field_multiselect-options{display:block;position:absolute;max-width:100%;padding:var(--gs-input-padding,12px);color:var(--gs-input-color,#332927);background-color:var(--gs-input-background,#fff);border:1px solid var(--gs-input-border-color,none);border-top:none;z-index:100}.multiselect .gs-form-field_multiselect-options span{display:block;margin:4px 0}.multiselect .gs-form-field_multiselect-options span .selected{color:var(--gs-color-primary,#ff2426)}.multiselect .gs-form-field_multiselect-options span:hover{opacity:.8;cursor:pointer}.gs-styles-multiselect .gs-form-field_multiselect-options{left:-1.1rem;border-radius:0 0 15px 15px;width:calc(100% + 36px);max-width:initial}.gs-styles-multiselect .gs-form-field_multiselect-options>span{margin:0;border-bottom:1px solid #4e4e4e1a;padding:1rem!important}.gs-styles-multiselect .gs-form-field_multiselect-options>span .selected{font-weight:600}"]
        })
    ], GsMultiselectComponent);
    return GsMultiselectComponent;
}(GsGenericFieldComponent));
export { GsMultiselectComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGlzZWxlY3QuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzL25nLWZvcm1zLyIsInNvdXJjZXMiOlsibGliL2dzLWZpZWxkcy9tdWx0aXNlbGVjdC9tdWx0aXNlbGVjdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUE0QixNQUFNLGVBQWUsQ0FBQztBQUczRSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw0Q0FBNEMsQ0FBQztBQU9yRjtJQUE0QyxrREFBdUI7SUFMbkU7UUFBQSxxRUFnRUM7UUF2RFEsYUFBTyxHQUE2QixFQUFFLENBQUM7UUFDdkMsaUJBQVcsR0FBRyxJQUFJLENBQUM7UUFDbkIsYUFBTyxHQUFHLEtBQUssQ0FBQztRQUNoQiw0QkFBc0IsR0FBRyxLQUFLLENBQUM7O0lBb0R4QyxDQUFDO0lBbERDLDRDQUFXLEdBQVgsVUFBWSxPQUFzQjtRQUFsQyxpQkFlQztRQWRDLElBQUksT0FBTyxDQUFDLFdBQVcsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLFlBQVksRUFBRTtZQUMzRCxJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDO1NBQ3JEO2FBQU07WUFDTCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQztTQUNuRDtRQUVELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUVoQyxJQUFJLE9BQU8sQ0FBQyxLQUFLLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRTtZQUM1RCxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1lBQzlELGFBQWEsQ0FBQyxPQUFPLENBQUMsVUFBQyxNQUF5QjtnQkFDOUMsS0FBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDbkMsQ0FBQyxDQUFDLENBQUM7U0FDSjtJQUNILENBQUM7SUFFTSw2Q0FBWSxHQUFuQixVQUFvQixNQUErQixFQUFFLE9BQWM7UUFBZCx3QkFBQSxFQUFBLGNBQWM7UUFDakUsSUFBTSxlQUFlLEdBQXVCLEVBQUUsQ0FBQztRQUMvQyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztRQUN4QixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUV2QiwwQ0FBMEM7UUFDMUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzVDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssTUFBTSxDQUFDLEtBQUssRUFBRTtnQkFDMUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO2FBQ3pDO1lBRUQsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUU7Z0JBQ25DLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO2dCQUV6QixlQUFlLENBQUMsSUFBSSxDQUFDO29CQUNuQixJQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO29CQUMxQixLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLO2lCQUM3QixDQUFDLENBQUM7Z0JBRUgsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQyxDQUFDO2dCQUM3RSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO2FBQzNFO1NBQ0Y7SUFDSCxDQUFDO0lBRU0seURBQXdCLEdBQS9CLFVBQWdDLEtBQW9DO1FBQXBDLHNCQUFBLEVBQUEsU0FBUyxJQUFJLENBQUMsc0JBQXNCO1FBQ2xFLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxLQUFLLENBQUM7SUFDdEMsQ0FBQztJQUVNLDZDQUFZLEdBQW5CO1FBQ0UsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLG9CQUFvQixDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ2hFLENBQUM7SUF4RFE7UUFBUixLQUFLLEVBQUU7eURBQThCO0lBQzdCO1FBQVIsS0FBSyxFQUFFOytEQUF3QztJQUZyQyxzQkFBc0I7UUFMbEMsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGdCQUFnQjtZQUMxQixvdENBQTJDOztTQUU1QyxDQUFDO09BQ1csc0JBQXNCLENBMkRsQztJQUFELDZCQUFDO0NBQUEsQUEzREQsQ0FBNEMsdUJBQXVCLEdBMkRsRTtTQTNEWSxzQkFBc0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEdEcm9wZG93bkZpZWxkIH0gZnJvbSAnLi4vLi4vZ3MtZm9ybXMud2lkZ2V0cyc7XG5pbXBvcnQgeyBHRmllbGRPcHRpb25WYWx1ZXMsIEdGaWVsZEV4aXN0c09wdGlvblZhbHVlcywgR0ZpZWxkT3B0aW9uVmFsdWVFeGlzdHMsIEdGaWVsZE9wdGlvblZhbHVlIH0gZnJvbSAnLi4vLi4vZ3MtZm9ybXMubW9kZWxzJztcbmltcG9ydCB7IEdzR2VuZXJpY0ZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi4vX2dlbmVyaWMtZmllbGQvX2dlbmVyaWMtZmllbGQuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZ3MtbXVsdGlzZWxlY3QnLFxuICB0ZW1wbGF0ZVVybDogJy4vbXVsdGlzZWxlY3QuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9tdWx0aXNlbGVjdC5jb21wb25lbnQuc2FzcyddXG59KVxuZXhwb3J0IGNsYXNzIEdzTXVsdGlzZWxlY3RDb21wb25lbnQgZXh0ZW5kcyBHc0dlbmVyaWNGaWVsZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpIHB1YmxpYyBmaWVsZDogR0Ryb3Bkb3duRmllbGQ7XG4gIEBJbnB1dCgpIHB1YmxpYyBmaWVsZE9wdGlvbjogR0ZpZWxkT3B0aW9uVmFsdWVzO1xuXG4gIHB1YmxpYyBvcHRpb25zOiBHRmllbGRFeGlzdHNPcHRpb25WYWx1ZXMgPSBbXTtcbiAgcHVibGljIG5vU2VsZWN0aW9uID0gdHJ1ZTtcbiAgcHVibGljIHRvdWNoZWQgPSBmYWxzZTtcbiAgcHVibGljIHNob3dNdWx0aXNlbGVjdE9wdGlvbnMgPSBmYWxzZTtcblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXMuZmllbGRPcHRpb24gJiYgY2hhbmdlcy5maWVsZE9wdGlvbi5jdXJyZW50VmFsdWUpIHtcbiAgICAgIHRoaXMuZmllbGRPcHRpb24gPSBjaGFuZ2VzLmZpZWxkT3B0aW9uLmN1cnJlbnRWYWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWVsZE9wdGlvbiA9IHRoaXMuZmllbGQuY29uZmlnLm9wdGlvblZhbHVlcztcbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLmZpZWxkT3B0aW9uO1xuXG4gICAgaWYgKGNoYW5nZXMuZmllbGQgJiYgY2hhbmdlcy5maWVsZC5jdXJyZW50VmFsdWUuY29uZmlnLnZhbHVlKSB7XG4gICAgICBjb25zdCBjdXJyZW50VmFsdWVzID0gY2hhbmdlcy5maWVsZC5jdXJyZW50VmFsdWUuY29uZmlnLnZhbHVlO1xuICAgICAgY3VycmVudFZhbHVlcy5mb3JFYWNoKChvcHRpb246IEdGaWVsZE9wdGlvblZhbHVlKSA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlT3B0aW9uKG9wdGlvbiwgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHRvZ2dsZU9wdGlvbihvcHRpb246IEdGaWVsZE9wdGlvblZhbHVlRXhpc3RzLCB0b3VjaGVkID0gdHJ1ZSkge1xuICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uczogR0ZpZWxkT3B0aW9uVmFsdWVzID0gW107XG4gICAgdGhpcy5ub1NlbGVjdGlvbiA9IHRydWU7XG4gICAgdGhpcy50b3VjaGVkID0gdG91Y2hlZDtcblxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogcHJlZmVyLWZvci1vZlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zW2ldLnZhbHVlID09PSBvcHRpb24udmFsdWUpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zW2ldLmV4aXN0cyA9ICFvcHRpb24uZXhpc3RzO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zW2ldLmV4aXN0cyA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLm5vU2VsZWN0aW9uID0gZmFsc2U7XG5cbiAgICAgICAgc2VsZWN0ZWRPcHRpb25zLnB1c2goe1xuICAgICAgICAgIHRleHQ6IHRoaXMub3B0aW9uc1tpXS50ZXh0LFxuICAgICAgICAgIHZhbHVlOiB0aGlzLm9wdGlvbnNbaV0udmFsdWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuY29udHJvbHNbdGhpcy5maWVsZC5jb25maWcubW9kZWxdLnBhdGNoVmFsdWUoc2VsZWN0ZWRPcHRpb25zKTtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuY29udHJvbHNbdGhpcy5maWVsZC5jb25maWcubW9kZWxdLnVwZGF0ZVZhbHVlQW5kVmFsaWRpdHkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdG9nZ2xlTXVsdGlzZWxlY3RPcHRpb25zKHZhbHVlID0gIXRoaXMuc2hvd011bHRpc2VsZWN0T3B0aW9ucykge1xuICAgIHRoaXMuc2hvd011bHRpc2VsZWN0T3B0aW9ucyA9IHZhbHVlO1xuICB9XG5cbiAgcHVibGljIHJlcXVpcmVkVGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5mb3Jtc1NlcnZpY2UuZ2V0VmFsaWRhdGlvbk1lc3NhZ2UoJ0VSUl9SRVFVSVJFRCcpO1xuICB9XG5cbn1cbiJdfQ==