import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
import { GsGenericFieldComponent } from '../_generic-field/_generic-field.component';
var GsDropdownComponent = /** @class */ (function (_super) {
    tslib_1.__extends(GsDropdownComponent, _super);
    function GsDropdownComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    GsDropdownComponent.prototype.ngOnChanges = function (changes) {
        if (changes.fieldOption && changes.fieldOption.currentValue) {
            this.fieldOption = changes.fieldOption.currentValue;
        }
        else {
            this.fieldOption = this.field.config.optionValues;
        }
        if (changes.field && changes.field.currentValue.config && !changes.field.currentValue.config.value) {
            this.field.config.value = null;
            this.dropdownTextValue = this.field.config.placeholder || this.field.config.label || this.field.config.model;
        }
        else if (changes.field && changes.field.currentValue.config && changes.field.currentValue.config.value) { // if changes has a value
            this.field.config.value = changes.field.currentValue.config.value;
            this.dropdownTextValue = this.setDropdownValue();
        }
        this.formGroup.controls[this.field.config.model].patchValue(this.field.config.value);
        this.formGroup.controls[this.field.config.model].updateValueAndValidity();
    };
    GsDropdownComponent.prototype.changeValue = function (text, value) {
        this.dropdownTextValue = text;
        this.field.config.value = value;
        this.formGroup.controls[this.field.config.model].patchValue(this.field.config.value);
        this.formGroup.controls[this.field.config.model].updateValueAndValidity();
    };
    GsDropdownComponent.prototype.setDropdownValue = function () {
        var _this = this;
        var option = this.fieldOption.find(function (elem) { return elem.value === _this.field.config.value; });
        return option && option.text ? option.text :
            this.field.config.placeholder || this.field.config.label || this.field.config.model;
    };
    GsDropdownComponent.prototype.resetField = function () {
        this.dropdownTextValue = this.field.config.placeholder || this.field.config.label || this.field.config.model;
    };
    tslib_1.__decorate([
        Input()
    ], GsDropdownComponent.prototype, "field", void 0);
    tslib_1.__decorate([
        Input()
    ], GsDropdownComponent.prototype, "fieldOption", void 0);
    GsDropdownComponent = tslib_1.__decorate([
        Component({
            selector: 'gs-dropdown',
            template: "<ng-container [formGroup]=\"formGroup\">\n  <div\n    class=\"gs-field\"\n    [class.gs-field-has-error]=\"validateField()\">\n\n    <label\n      class=\"gs-field-box gs-input-select-box gs-field-box-icon\"\n      [class.gs-form-field-box-full]=\"field.config.label\">\n\n      <span\n        class=\"gs-field-label\"\n        *ngIf=\"field.config.label\">\n        {{ field.config.label | translate }}\n      </span>\n\n      <div class=\"gs-input-select\">\n        <div class=\"gs-input-select-value\" data-value={selectValue.value}>\n          {{ dropdownTextValue | translate }}\n        </div>\n        <input class=\"gs-input-select-checkbox\" type=\"checkbox\" />\n        <div class=\"gs-input-select-options-background\"></div>\n        <div class=\"gs-input-select-options\">\n          <div\n            *ngFor=\"let option of fieldOption\"\n            class=\"gs-input-select-option\"\n            [class.gs-input-select-option-active]=\"option.value === formGroup.controls[field.config.model].value\"\n            (click)=\"changeValue(option.text, option.value)\">\n            {{ option.text | translate }}\n          </div>\n        </div>\n      </div>\n\n      <svg class=\"gs-field-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M15.88 9.29L12 13.17 8.12 9.29c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41-.39-.38-1.03-.39-1.42 0z\" />\n      </svg>\n    </label>\n\n    <span class=\"gs-field-error\" *ngIf=\"validateField()\">\n      {{ getFieldError(field.config.model) | translate }}\n    </span>\n  </div>\n</ng-container>\n",
            styles: ["*{color:var(--gs-color-font,#706967);outline:0;box-sizing:border-box}input,option,select,textarea{border:none;outline:0;display:block;box-shadow:none;box-sizing:border-box}input::-webkit-input-placeholder,option::-webkit-input-placeholder,select::-webkit-input-placeholder,textarea::-webkit-input-placeholder{opacity:.5}input::-moz-placeholder,option::-moz-placeholder,select::-moz-placeholder,textarea::-moz-placeholder{opacity:.5}input::-ms-input-placeholder,option::-ms-input-placeholder,select::-ms-input-placeholder,textarea::-ms-input-placeholder{opacity:.5}input::placeholder,option::placeholder,select::placeholder,textarea::placeholder{opacity:.5}.disabled{opacity:var(--gs-disabled-opacity,.7);cursor:default;pointer-events:none}.button{-webkit-transition:.2s ease-in-out;transition:.2s ease-in-out;cursor:pointer;border:none;text-align:center;font-weight:700;outline:0;padding:var(--gs-primary-button-padding,1rem);color:var(--gs-primary-button-color,#fff);background:var(--gs-primary-button-background,#b8b4b4);border-radius:var(--gs-primary-button-border-radius,1rem)}.button:hover{opacity:.8}.button.button-primary{padding:var(--gs-primary-button-padding,1rem);color:var(--gs-primary-button-color,#fff);background:var(--gs-primary-button-background,#ff2426);border:none;border-radius:var(--gs-primary-button-border-radius,1rem)}.button.button-secondary{padding:var(--gs-primary-button-padding,1rem);color:var(--gs-primary-button-background,#ff2426);background:0 0;border:2px solid var(--gs-primary-button-background,#ff2426);border-radius:var(--gs-primary-button-border-radius,1rem)}*,input,select,textarea{font-size:var(--gs-font-size,.9rem);font-family:inherit;background-color:transparent}.gs-no-select{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.gs-field{position:relative}.gs-field.gs-field-has-error .gs-field-box{border:2px solid #ff2426}.gs-field.gs-field-has-error .gs-field-error{display:block}.gs-field-box{border:2px solid var(--gs-input-border-color,none);display:-ms-grid;display:grid;background-color:var(--gs-input-background,#fff);padding:var(--gs-input-padding,12px);border-radius:var(--gs-input-border-radius,1rem);height:51px}.gs-field-box .gs-field-label{color:#706967;font-size:.6rem;font-weight:600;letter-spacing:.1em;line-height:1;text-transform:uppercase;-ms-grid-column:1;grid-column:1;-ms-grid-row:1;grid-row:1;color:var(--gs-input-color,#332927);opacity:.5}.gs-field-box .gs-field-input{outline:0;border:none;width:100%;margin:0;font-weight:600;font-size:1rem;line-height:1;padding:0;-ms-grid-column:1;grid-column:1;-ms-grid-row:2;grid-row:2}.gs-field-box .gs-field-input :focus,.gs-field-box .gs-field-input:focus{outline:0}.gs-field-box .gs-field-input::-webkit-input-placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-field-input::-moz-placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-field-input::-ms-input-placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-field-input::placeholder{color:var(--gs-input-color,#332927);opacity:.7;font-weight:400}.gs-field-box .gs-form-field_symbol{-ms-grid-column:2;grid-column:2;-ms-grid-row:1;-ms-grid-row-span:2;grid-row:1/3;-ms-grid-row-align:center;align-self:center;text-align:right}.gs-field-box.gs-field-box-full .gs-field-input{padding:.1rem 0 0}.gs-field-box.gs-input-check-box,.gs-field-box.gs-input-switch-box{-ms-grid-columns:1fr auto;grid-template-columns:1fr auto}.gs-field-box.gs-input-check-box .gs-field-label,.gs-field-box.gs-input-switch-box .gs-field-label{-ms-grid-column:1;grid-column:1;-ms-grid-row:1;grid-row:1;-ms-grid-row-align:center;align-self:center}.gs-field-box.gs-input-check-box .gs-input-check,.gs-field-box.gs-input-check-box .gs-input-switch,.gs-field-box.gs-input-switch-box .gs-input-check,.gs-field-box.gs-input-switch-box .gs-input-switch{-ms-grid-column:2;grid-column:2;-ms-grid-row:1;grid-row:1;-ms-grid-row-align:center;align-self:center}.gs-field-box.gs-field-box-icon{display:-ms-grid;display:grid;-ms-grid-columns:1fr 20px;grid-template-columns:1fr 20px}.gs-field-box.gs-field-box-icon .gs-field-icon{cursor:pointer;width:20px;fill:#706967;-ms-grid-column:2;grid-column:2;-ms-grid-row:1;-ms-grid-row-span:2;grid-row:1/3;-ms-grid-row-align:center;align-self:center}.gs-field-error,.gs-field-hint{font-size:.8rem;padding:.6rem 1rem;display:inline-block;margin-right:1rem}.gs-field-error{display:none;color:#ff2426}.gs-input-select-box{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.gs-input-select-box .gs-input-select{position:relative}.gs-input-select-box .gs-input-select .gs-input-select-options-background{cursor:default;opacity:0;background-color:transparent;height:100vh;width:100vw;display:none;position:fixed;top:0;bottom:0;left:0;right:0;z-index:900;pointer-events:auto}.gs-input-select-box .gs-input-select .gs-input-select-options{border:2px solid #e5e5e4;box-shadow:0 10px 10px rgba(0,0,0,.03),0 5px 5px rgba(0,0,0,.01);display:none;position:absolute;background:#fff;border-radius:1rem;top:32px;left:calc(-1rem - 2px);width:calc(100% + (2 * 1rem) + 24px);overflow-x:hidden;overflow-y:auto;max-height:180px;z-index:900}.gs-input-select-box .gs-input-select .gs-input-select-options .gs-input-select-option{cursor:pointer;position:relative;display:-webkit-box;display:flex;height:51px;padding:.6rem 1rem;-webkit-box-align:center;align-items:center;border-bottom:1px solid #e5e5e4;z-index:901}.gs-input-select-box .gs-input-select .gs-input-select-options .gs-input-select-option.gs-input-select-option-active,.gs-input-select-box .gs-input-select .gs-input-select-options .gs-input-select-option:hover{background-color:#e5e5e4}.gs-input-select-box .gs-input-select .gs-input-select-checkbox{display:none}.gs-input-select-box .gs-input-select .gs-input-select-checkbox:checked~.gs-input-select-options,.gs-input-select-box .gs-input-select .gs-input-select-checkbox:checked~.gs-input-select-options-background{display:block}.gs-input-select-box .gs-input-select .gs-input-select-value{display:block;font-weight:600;font-size:1rem;line-height:1;padding:.1rem 0 0}.gs-input-select-box .gs-input-select .gs-input-select-value::-webkit-input-placeholder{color:#332927;opacity:1;font-weight:400}.gs-input-select-box .gs-input-select .gs-input-select-value::-moz-placeholder{color:#332927;opacity:1;font-weight:400}.gs-input-select-box .gs-input-select .gs-input-select-value::-ms-input-placeholder{color:#332927;opacity:1;font-weight:400}.gs-input-select-box .gs-input-select .gs-input-select-value::placeholder{color:#332927;opacity:1;font-weight:400}"]
        })
    ], GsDropdownComponent);
    return GsDropdownComponent;
}(GsGenericFieldComponent));
export { GsDropdownComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJvcGRvd24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzL25nLWZvcm1zLyIsInNvdXJjZXMiOlsibGliL2dzLWZpZWxkcy9kcm9wZG93bi9kcm9wZG93bi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUE0QixNQUFNLGVBQWUsQ0FBQztBQUczRSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw0Q0FBNEMsQ0FBQztBQU9yRjtJQUF5QywrQ0FBdUI7SUFBaEU7O0lBeUNBLENBQUM7SUFuQ0MseUNBQVcsR0FBWCxVQUFZLE9BQXNCO1FBQ2hDLElBQUksT0FBTyxDQUFDLFdBQVcsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLFlBQVksRUFBRTtZQUMzRCxJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDO1NBQ3JEO2FBQU07WUFDTCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQztTQUNuRDtRQUVELElBQUksT0FBTyxDQUFDLEtBQUssSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFO1lBQ2xHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7WUFDL0IsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1NBQzlHO2FBQU0sSUFBSSxPQUFPLENBQUMsS0FBSyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLEVBQUUseUJBQXlCO1lBQ25JLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1lBQ2xFLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztTQUNsRDtRQUVELElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNyRixJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0lBQzVFLENBQUM7SUFFTSx5Q0FBVyxHQUFsQixVQUFtQixJQUFZLEVBQUUsS0FBYTtRQUM1QyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO1FBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDaEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JGLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLHNCQUFzQixFQUFFLENBQUM7SUFDNUUsQ0FBQztJQUVPLDhDQUFnQixHQUF4QjtRQUFBLGlCQUlDO1FBSEMsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLENBQUMsS0FBSyxLQUFLLEtBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBdEMsQ0FBc0MsQ0FBQyxDQUFDO1FBQ3JGLE9BQU8sTUFBTSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMxQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztJQUN4RixDQUFDO0lBRU0sd0NBQVUsR0FBakI7UUFDRSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDL0csQ0FBQztJQXZDUTtRQUFSLEtBQUssRUFBRTtzREFBOEI7SUFDN0I7UUFBUixLQUFLLEVBQUU7NERBQXdDO0lBRnJDLG1CQUFtQjtRQUwvQixTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsYUFBYTtZQUN2QixncURBQXdDOztTQUV6QyxDQUFDO09BQ1csbUJBQW1CLENBeUMvQjtJQUFELDBCQUFDO0NBQUEsQUF6Q0QsQ0FBeUMsdUJBQXVCLEdBeUMvRDtTQXpDWSxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEdEcm9wZG93bkZpZWxkIH0gZnJvbSAnLi4vLi4vZ3MtZm9ybXMud2lkZ2V0cyc7XG5pbXBvcnQgeyBHRmllbGRPcHRpb25WYWx1ZXMgfSBmcm9tICcuLi8uLi9ncy1mb3Jtcy5tb2RlbHMnO1xuaW1wb3J0IHsgR3NHZW5lcmljRmllbGRDb21wb25lbnQgfSBmcm9tICcuLi9fZ2VuZXJpYy1maWVsZC9fZ2VuZXJpYy1maWVsZC5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdncy1kcm9wZG93bicsXG4gIHRlbXBsYXRlVXJsOiAnLi9kcm9wZG93bi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2Ryb3Bkb3duLmNvbXBvbmVudC5zYXNzJ11cbn0pXG5leHBvcnQgY2xhc3MgR3NEcm9wZG93bkNvbXBvbmVudCBleHRlbmRzIEdzR2VuZXJpY0ZpZWxkQ29tcG9uZW50IGltcGxlbWVudHMgT25DaGFuZ2VzIHtcbiAgQElucHV0KCkgcHVibGljIGZpZWxkOiBHRHJvcGRvd25GaWVsZDtcbiAgQElucHV0KCkgcHVibGljIGZpZWxkT3B0aW9uOiBHRmllbGRPcHRpb25WYWx1ZXM7XG5cbiAgcHVibGljIGRyb3Bkb3duVGV4dFZhbHVlOiBzdHJpbmc7XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzLmZpZWxkT3B0aW9uICYmIGNoYW5nZXMuZmllbGRPcHRpb24uY3VycmVudFZhbHVlKSB7XG4gICAgICB0aGlzLmZpZWxkT3B0aW9uID0gY2hhbmdlcy5maWVsZE9wdGlvbi5jdXJyZW50VmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmllbGRPcHRpb24gPSB0aGlzLmZpZWxkLmNvbmZpZy5vcHRpb25WYWx1ZXM7XG4gICAgfVxuXG4gICAgaWYgKGNoYW5nZXMuZmllbGQgJiYgY2hhbmdlcy5maWVsZC5jdXJyZW50VmFsdWUuY29uZmlnICYmICFjaGFuZ2VzLmZpZWxkLmN1cnJlbnRWYWx1ZS5jb25maWcudmFsdWUpIHtcbiAgICAgIHRoaXMuZmllbGQuY29uZmlnLnZhbHVlID0gbnVsbDtcbiAgICAgIHRoaXMuZHJvcGRvd25UZXh0VmFsdWUgPSB0aGlzLmZpZWxkLmNvbmZpZy5wbGFjZWhvbGRlciB8fCB0aGlzLmZpZWxkLmNvbmZpZy5sYWJlbCB8fCB0aGlzLmZpZWxkLmNvbmZpZy5tb2RlbDtcbiAgICB9IGVsc2UgaWYgKGNoYW5nZXMuZmllbGQgJiYgY2hhbmdlcy5maWVsZC5jdXJyZW50VmFsdWUuY29uZmlnICYmIGNoYW5nZXMuZmllbGQuY3VycmVudFZhbHVlLmNvbmZpZy52YWx1ZSkgeyAvLyBpZiBjaGFuZ2VzIGhhcyBhIHZhbHVlXG4gICAgICB0aGlzLmZpZWxkLmNvbmZpZy52YWx1ZSA9IGNoYW5nZXMuZmllbGQuY3VycmVudFZhbHVlLmNvbmZpZy52YWx1ZTtcbiAgICAgIHRoaXMuZHJvcGRvd25UZXh0VmFsdWUgPSB0aGlzLnNldERyb3Bkb3duVmFsdWUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmZvcm1Hcm91cC5jb250cm9sc1t0aGlzLmZpZWxkLmNvbmZpZy5tb2RlbF0ucGF0Y2hWYWx1ZSh0aGlzLmZpZWxkLmNvbmZpZy52YWx1ZSk7XG4gICAgdGhpcy5mb3JtR3JvdXAuY29udHJvbHNbdGhpcy5maWVsZC5jb25maWcubW9kZWxdLnVwZGF0ZVZhbHVlQW5kVmFsaWRpdHkoKTtcbiAgfVxuXG4gIHB1YmxpYyBjaGFuZ2VWYWx1ZSh0ZXh0OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmRyb3Bkb3duVGV4dFZhbHVlID0gdGV4dDtcbiAgICB0aGlzLmZpZWxkLmNvbmZpZy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuZm9ybUdyb3VwLmNvbnRyb2xzW3RoaXMuZmllbGQuY29uZmlnLm1vZGVsXS5wYXRjaFZhbHVlKHRoaXMuZmllbGQuY29uZmlnLnZhbHVlKTtcbiAgICB0aGlzLmZvcm1Hcm91cC5jb250cm9sc1t0aGlzLmZpZWxkLmNvbmZpZy5tb2RlbF0udXBkYXRlVmFsdWVBbmRWYWxpZGl0eSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXREcm9wZG93blZhbHVlKCk6IHN0cmluZyB7XG4gICAgY29uc3Qgb3B0aW9uID0gdGhpcy5maWVsZE9wdGlvbi5maW5kKGVsZW0gPT4gZWxlbS52YWx1ZSA9PT0gdGhpcy5maWVsZC5jb25maWcudmFsdWUpO1xuICAgIHJldHVybiBvcHRpb24gJiYgb3B0aW9uLnRleHQgPyBvcHRpb24udGV4dCA6XG4gICAgICB0aGlzLmZpZWxkLmNvbmZpZy5wbGFjZWhvbGRlciB8fCB0aGlzLmZpZWxkLmNvbmZpZy5sYWJlbCB8fCB0aGlzLmZpZWxkLmNvbmZpZy5tb2RlbDtcbiAgfVxuXG4gIHB1YmxpYyByZXNldEZpZWxkKCkge1xuICAgIHRoaXMuZHJvcGRvd25UZXh0VmFsdWUgPSB0aGlzLmZpZWxkLmNvbmZpZy5wbGFjZWhvbGRlciB8fCB0aGlzLmZpZWxkLmNvbmZpZy5sYWJlbCB8fCB0aGlzLmZpZWxkLmNvbmZpZy5tb2RlbDtcbiAgfVxufVxuIl19